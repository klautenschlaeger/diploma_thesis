\documentclass[]{nsm-thesis}
% options:
% [germanthesis] - Thesis is written in German
% [plainunnumbered] - Don't print numbers on plain pages
% [earlydraft] - Settings for quick draft printouts
% [watermark] - Print current time/date at bottom of each page
% [phdthesis] - switch to PhD thesis style
% [twoside] - double sided
% [cutmargins] - text body fills complete page

% Author name. Separate multiple authors with commas.

\usepackage{acro}
\usetikzlibrary{quotes,angles}


\author{Karl Christian Lautenschläger}
\birthday{29. Juni 1998}
\birthplace{Magdeburg}

% Title of your thesis.
\title{Suitability of Modern Wi-Fi for Wireless-Infield-Communication of Agricultural Machines}

% Choose one of the following lines, changing the word "Computer Science" to match your degree program.
\thesistype{Diploma Thesis in Information Systems Engineering}\thesiscite{Diploma Thesis~(Diplomarbeit)}

\advisors{Christoph Sommer}
% List of advisors (without academic titles), separated by commas.

% List of referees (without academic titles), separated by commas.
\referees{Christoph Sommer, Burkhard Hensel}

\DeclareAcronym{FH}{
	short=FH,
	long=Forage Harvester,
}
\DeclareAcronym{TM}{
	short=TM,
	long=Transport Machine,
}

\DeclareAcronym{FEC}{
	short=FEC,
	long=Forward Error Correction,
}
\DeclareAcronym{WPA}{
	short=WPA,
	long=Wi-Fi Protected Access,
}

\DeclareAcronym{DCF}{
	short=DCF,
	long=Distribution Coordination Function,
}
\DeclareAcronym{DIFS}{
	short=DIFS,
	long=Distributed Coordination Function Interframe Space,
}
\DeclareAcronym{SSID}{
	short=SSID,
	long=Service Set Identifier,
}
\DeclareAcronym{SIFS}{
	short=SIFS,
	long=Short Interframe Space,
}
\DeclareAcronym{ACK}{
	short=ACK,
	long=Acknowledgement,
}
\DeclareAcronym{NAV}{
	short=NAV,
	long=Network Allocation Vector,
}
\DeclareAcronym{PCF}{
	short=PCF,
	long=Point Coordination Function,
}
\DeclareAcronym{CSMACA}{
	short=CSMA/CA,
	long=Carrier Sense Multiple
	Access/Collision Avoidance,
}

\DeclareAcronym{IBSS}{
	short=IBSS,
	long=Independent Basic Service Set,
}
\DeclareAcronym{AP}{
	short=AP,
	long=Access Point,
}
\DeclareAcronym{PPD}{
	short=PPD,
	long=Plant Population Density,
}
\DeclareAcronym{WIC}{
	short=WIC,
	long=Wireless-Infield Communication,
}
\DeclareAcronym{M2M}{
	short=M2M,
	long=Machine-To-Machine,
}

\DeclareAcronym{MIMO}{
	short=MIMO,
	long=Multiple Input Multiple Output,
}
\DeclareAcronym{STBC}{
	short=STBC,
	long=Space-Time-Block-Code,
}
\DeclareAcronym{PPDU}{
	short=PPDU,
	long=Physical layer convergence protocol data unit,
}
\DeclareAcronym{MCS}{
	short=MCS,
	long=Modulation
	and Coding Scheme,
}
\DeclareAcronym{CR}{
	short=CR,
	long=Coding Rate,
}
\DeclareAcronym{GI}{
	short=GI,
	long=Guard Interval,
}
\DeclareAcronym{DCM}{
	short=DCM,
	long=Dual Carrier Modulation,
}
\DeclareAcronym{MANET}{
	short=MANET,
	long=Mobile Ad Hoc Network
	and Coding Scheme,
}  

\DeclareAcronym{ASC}{
	short=ASC,
	long=Automatic Section Control,
}
\DeclareAcronym{m-ASC}{
	short=m-ASC,
	long=Meshed Automatic Section Control,
}
\DeclareAcronym{AEF}{
	short=AEF,
	long=Agricultural Industry Electronics Foundation,
}
\DeclareAcronym{FMIS}{
	short=FMIS,
	long=Farm Management Information System,
}
\DeclareAcronym{hTMM}{
	short=hTMM,
	long=Hybrid Threat Modeling Method,
}
\DeclareAcronym{STRIDE}{
	short=STRIDE,
	long= Spoofing\, Tampering\, Repudiation\, Information disclosure\, Denial of services\, and Escalation
	of privileges,
}
\DeclareAcronym{PASTA}{
	short=PASTA,
	long= Process for Attack Simulation and Threat Analysis,
}

\DeclareAcronym{ac}{
	short=802.11ac,
	long= IEEE 802.11ac,
}

\DeclareAcronym{ax}{
	short=802.11ax,
	long= IEEE 802.11ax,
}

\DeclareAcronym{OFDMA}{
	short=OFDMA,
	long= Orthogonal Frequency-Division Multiple Access,
}
\DeclareAcronym{OFDM}{
	short=OFDM,
	long= Orthogonal Frequency-Division Multiplexing,
}
\DeclareAcronym{RU}{
	short=RU,
	long= Resource Unit,
}
\DeclareAcronym{SINR}{
	short=SINR,
	long= Signal-to-Interference-plus-Noise Ratio,
}
\DeclareAcronym{QAM}{
	short=QAM,
	long=Quadrature Amplitude Modulation,
}
\DeclareAcronym{PSK}{
	short=PSK,
	long=Phase Shift Keying,
}
\DeclareAcronym{RSS}{
	short=RSS,
	long=Received Signal Strength,
}
\DeclareAcronym{PDR}{
	short=PDR,
	long=Packet Delivery Ratio,
}
\DeclareAcronym{LOS}{
	short=LOS,
	long=Line-of-sight,
}
\DeclareAcronym{ESS}{
	short=ESS,
	long=Extended Service Set,
}
\DeclareAcronym{BSS}{
	short=BSS,
	long=Basic Service Set,
}


% Define abbreviations used in the thesis here.
\acrodef{WSN}{Wireless Sensor Network}

\acrodef{ROI}{Region of Interest}{short-indefinite={an}, long-plural-form={Regions of Interest}}
\acrodef{ADAC}{German Automobile Association}{foreign={Allgemeiner Deutscher Automobilclub}}
\acrodef{CANhashing}[CAN]{Content Addressable Network}{extra={when referring to the distributed hash table}}
\acrodef{CANproto}[CAN]{Controller Area Network}{extra={when referring to the bus protocol}}

\begin{document}

\pagenumbering{roman}

\maketitle

\cleardoublepage

\TODO{This template is for use with \texttt{pdflatex} and \texttt{biber}. It has been tested with TeX~Live 2020 (as of 25 Oct 2020).}

\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}
\begin{otherlanguage*}{american}

about 1/2 page:
\begin{enumerate}
    \item Motivation (Why do we care?)
    \item Problem statement (What problem are we trying to solve?)
    \item Approach (How did we go about it)
    \item Results (What's the answer?)
    \item Conclusion (What are the implications of the answer?)
\end{enumerate}

The abstract is a miniature version of the thesis.
It should be treated as an entirely separate document.
Do not assume that a reader who has access to an abstract will also have access to the thesis.
Do not assume that a reader who reads the thesis has read the abstract.

\end{otherlanguage*}


\chapter*{Kurzfassung}
\addcontentsline{toc}{chapter}{Kurzfassung}
\begin{otherlanguage*}{ngerman}

Gleicher Text (sinngemäß, nicht wörtlich) in Deutsch

\end{otherlanguage*}
\acresetall

\cleardoublepage
\tableofcontents
\TODO{The table of contents should fit on one page. When in doubt, adjust the \texttt{tocdepth} counter.}

\cleardoublepage
\pagenumbering{arabic}


\chapter{Introduction}
%\chapter{Einleitung}
\label{sec:introduction}

\begin{itemize}
\item general motivation for your work, context and goals.
\item context: make sure to link where your work fits in
\item problem: gap in knowledge, too expensive, too slow, a deficiency, superseded technology
\item strategy: the way you will address the problem
\item recommended length: 1-2 pages.
\end{itemize}




\chapter{Fundamentals}
\label{sec:fundamentals}



\begin{itemize}
\item describe methods and techniques that build the basis of your work
\item include what's needed to understand your work (e.g., techniques, protocols, models, hardware, software, ...)
\item exclude what's not (e.g., anything you yourself did, anything your reader can be expected to know, ...)
\item review related work(!)
\item recommended length: approximately one third of the thesis.
\end{itemize}

\TODO{
	-1/3 ist kurz, weil der Bezug und die Relation zur Landwirtschaft groß ist... Aber wen interessiert das? 
-1/3  related Work erwähnt man dann Unterstützung von Professor Klingler wie und wo? erwähnt man sich selber ?  
`}
\section{\acl{WIC}}
Given that there are many different agricultural technology companies worldwide and  mix of their machines is often used together in an agricultural company, a demand for interoperability between agricultural machines of different brands emerged. In 2008, the \ac{AEF} was founded to develop and standardize this interoperability w\footnote{https://www.aef-online.org/about-us/about-the-aef.html Accessed: 24.07.2022}.

The AEF has defined a binary unit system, the ISO 11783 standard, for agricultural machinery communication, mainly tractors and implements \cite{iglesias_enabling_2014}. According to \textcite{schlingmann_aef_2019}, the ISO 11783 standard is known as the ISOBUS system.

The authors mention that the AEF is currently working on other issues. Among them is also the \ac{WIC}. In the associated project group \ac{WIC}, solutions for \ac{M2M} communication between cooperating, agricultural machines are to be developed and standardized.

For this purpose, the authors name the following use cases:
\input{wic.tex}

Considering that I investigate the Suitability of modern Wifi for Wireless-Infield-Communication and Wi-Fi 6 and Wi-Fi 5 are no long range technologies, I will focus on investigating the suitability of these two Wi-Fi standards for the \ac{WIC} use cases Real-Time Machine-to-Machine Control and Streaming Services. Throughout this thesis, I will refer to real-time machine-to-machine control as Agricultural Platooning.
\section{Related Work}
AEF Vorgehen

Lösungen
Technologien

Außer AEF Platooning:

	OMNiDRIVE Raven Industries Technology? Starfire In einem Manual?
	Machine Sync Starfire 6000 - SF1 Gen4 4240 Display Autotrac 300 
	CartACE Nothing named? 
	
	AutoSync Trimble m-ASC

Außer AEF Video Streaming:

	OcuSync
	Lightbridge DJI Mavic
	Herelink

\todo{What is it? 2.4 GHz? But is it Wifi? }



Aufbau:

WIC Umsetzungen: 

Klingler 802.11p
Elektrische Deichsel Fendt
Beyond Sensing ???

John Deere Machine Sync
Raven Machine Sync
Cellular networks

cellular network coverage AEF paper 

Wifi 6 Outdoorcommunication



In order to implement these described \ac{WIC} use cases, the \ac{WIC} project group has been searching for a technology that can realize the required data rates, latencies and high transmission range. The plans for doing so are written down by members of the \ac{WIC} project group in \cite{schlingmann_challenges_2017}.

The authors consider the fundamental use of cellular networks as very problematic because, according to \cite{noauthor_ict_2016}, only \SI{30}{\percent} of the land surface has network coverage. For this reason, there is a major concern that the required data cannot be exchanged because there is no network connectivity in many fields. Nevertheless, the authors want to leave the future \ac{WIC} system open to cellular standards.

The current focus of the authors is on IEEE 802.11 technologies, which must first be evaluated for use in the agricultural environment.

In collaboration with \textcite{klingler_agriculture_2018}, the authors investigated IEEE 802.11p technology for \ac{WIC} in agricultural scenarios. Experiments revealed that data could be exchanged over a maximum range of \SI{1700}{\metre}. But during the measurement in an agricultural work scenario from the corn harvest, there were collapses in the Received Signal Strength due to shadowing effects of the machines. The high range, data rate, and possible latencies make IEEE 802.11p a good technology for \ac{WIC} according to \textcite{schlingmann_challenges_2017}.

As of July 2, 2021, the frequency spectrum of IEEE 802.11p in the United States of America, ranging from \SIrange{5,850}{5,925}{\giga\hertz}, has been split. The upper \SI{30}{\mega\hertz} are reserved for Intelligent transportation systems now. The lower \SI{45}{\mega\hertz} have been released for unlicensed operations \cite{noauthor_use_2021}.

Since the use of IEEE 802.11p has now been newly regulated by the FCC, the \ac{WIC} project group is looking for an alternative technology that enables \ac{WIC}.

\section{Wireless Lans according to IEEE 802.11}
\todo{Paper Christoph Sommer, Doktorarbeit, Diplomarbeit, Mario Franke, Tobias Hardes}
According to \textcite{kauffels_wireless_2002} the first version of the Standard IEEE 802.11 was published in 1999 to enable a wireless alternative to Ethernet - or Token-Ring - networks.
\textcite{sauter_wireless_2022} considers IEEE 802.11 also to be an implementation of Ethernet with the help of wirless radio technologies. The author lists the extensions to the original standard, which range from 802.11b, 802.11g, 802.11a, 802.11n, 802.11ac to the latest enhancement 802.11ax. The different IEEE 802.11 standards can operate in the  \SI{2.4}{\giga\hertz} - , \SI{5}{\giga\hertz} and \SI{6}{\giga\hertz} - frequency band. 


\textcite{kauffels_wireless_2002} defines the following three basic architectures for IEEE 802.11.

If two or more stations communicate directly without an AP, they form an ad hoc network. According to the author, this can be set up quickly and easily and is also called \ac{IBSS}.

The Infrastructure \ac{BSS} mode allows all stations within the range of defined range around the \ac{AP} to communicate via a central \ac{AP}. Within the area of the \ac{BSS}, all stations can move freely and communicate with one another.

Since an \ac{AP} has limited range and can only cover a certain area, the \ac{ESS} was introduced. It contains a distribution system, which links several \ac{BSS} with each other.

Thereby, the BSS coverage areas can physically overlap so that continuous connection of stations within the ESS can be provided. For a better performance the \ac{BSS} can be placed physically on top of each other. One can also have physically separate \ac{BSS}s so that these \ac{BSS}s can be linked together over long distances. According to the author, the standard does not specify a distance limit for such connections. 

He also mentions, that the standard defines the following three mobility types for station in an \ac{ESS}, where a station can do no-transition and thereby stay within a \ac{BSS}, \ac{BSS}-transitioning and move from one \ac{BSS} to another \ac{BSS} within the same \ac{ESS} and \ac{ESS}-transition, where the Station moves from a \ac{ESS} to another one but no stable connection can be guaranteed.

\textcite{sauter_wireless_2022} adds, that usually Ethernet is used to link \ac{AP}s in within an \ac{ESS}. But according to the author this can be replaced by a wireless connection, which is called wireless bridge.
\todo{ESS not needed?}

\TODO{Sauter 2022 Ad-Hoc Infos}
The further development of IEEE 802.11 is accompanied by a constant change of the physical layer. \textcite{sauter_wireless_2022} mentions, that all new enhancements of the physical layer of IEEE 802.11 are backward compatible to previous definitions of the it.

According to the Author, IEEE 802.11 initially used DSSS and FHSS as modulation methods.
Since IEEE 802.11g the modulation method \ac{OFDM} can be used in the \SI{2.4}{\giga\hertz} frequency band. the author explains \ac{OFDM} divides the transmission channel in subcarriers with different amplitudes, frequencies and phases. Each subcarrier is orthogonal to another one, as they send the information "Low", where only one other subcarrier is sending the information "High".
For the modulation and demodulation the FFT and IFFT are used respectively.
\textcite{kauffels_wireless_2002} states, that \ac{OFDM} can be used in the \SI{5}{\giga\hertz} frequency band since IEEE 802.11a.

Convolutional encoders are used to increase redundancy. This enables \ac{FEC}, which can distribute a bit sequence over the \ac{OFDM} subcarriers in such a way that an original bit sequence can be decoded at the receiver even in the event of interference. \textcite{kauffels_wireless_2002}


Various \ac{MCS}s can be selected in the physical layer in order to transmit as many bits as possible in the signal. 
These \ac{MCS}s are based on \ac{PSK} or \ac{QAM}. 
\textcite{kauffels_wireless_2002} recommends setting the parameters in an \ac{OFDM} system in such a way that first the coding rate and then the complexity of the \ac{MCS} is reduced in difficult transmission environments.\TODO{Viel aus gleichem Lehrbuch Quellen? / Lieblingsautor / }
An imaginary, theoretical transmission channel is usually specified as a square-wave signal in the frequency domain with the limits of both minimum and maximum amplitude and cut-off frequency. \textcite{kauffels_wireless_2002} defines the roll-off factor as a cosine-shaped flattening of the square signal between 0 and 1. In addition, the author points out that \ac{QAM} can generate high roll-off factors, so that signals interfere significantly more with adjacent channels.
The author recommends increasing the frequency spacing between transmission channels.
\todo{Symbol length, GI, subcarrier spacing reciprocal}
\todo{Wellenausbreitung, Überlagerungseffekte, Reflexsion, Reflexsion nicht bei Metall}
\todo{Knauffel OFDM PHY}





The next layer in the OSI model is the Data Link Layer.
The Data Link Layer consists of Medium Access - and Logic Link Control functionalities.


According to \textcite{kauffels_wireless_2002}, the medium access control functionalities cover network entry - ,network authentication - and media access methods.
The author explains, that every \ac{AP} send beacon frames periodically to synchronise its stations in the \ac{BSS} and that the beacon frame contains the \ac{SSID}, which identifies the \ac{BSS} or \ac{ESS} of the station. \textcite{sauter_wireless_2022} adds that a beacon frame contains a \SI{16}{\bit} - long capability information element. Each bit here signals that the \ac{AP} provides a particular function or has a specific feature. 

\textcite{kauffels_wireless_2002} explains the procedure for network entry of a station. A station can use the passive or the active scanning mode. In passive scanning mode, the station listens for a beacon frame in the various transmission channels. Alternatively, in active scanning mode, a station can also send out a probe frame. This can contain an already known \ac{SSID} to test the presence of the \ac{AP}. To get an \ac{AP} in range, the probe-frame can also contain a broadcast SSID that causes all nearby \ac{AP}s to respond. The response of an \ac{AP} to the probe frame is the probe-response frame, which contains the same information as a beacon frame. With the information from the beacon frame, a station can start the authentication process.
 
For this process, \textcite{kauffels_wireless_2002} names the two methods Open System Authentication and Shared Key Authentication. \textcite{sauter_wireless_2022} explains that Open System Authentication is based on a device making an authentication request to the \ac{AP}. If the \ac{AP} answers with a positive status in the Authentication Frame, the station is included in the \ac{BSS}. The actual encryption and authentication is then performed by the \ac{WPA} functions. The author points out that Shared Key Authentication is no longer used today. 

 the IEEE 802.11 standard describes the two media access methods \ac{DCF} and \ac{PCF}.

\textcite{sauter_wireless_2022} explains that \ac{DCF} is based on the media access method \ac{CSMACA}. In \ac{CSMACA} a device that is willing to transmit senses in the air transmission medium for a transmitting activity. If no other device is transmitting, the device can transmit. In the case of transmit activity, the terminal must wait at least until the transmission and \ac{DIFS} are over.
Since data transmission via the air transmission medium is very vulnerable to errors, the standard IEEE 802.11 requires that each received packet must be confirmed with an \ac{ACK} frame.
The \ac{DIFS} ensures that an \ac{ACK} frame can be sent before another station uses the same channel to send a data frame. 
To avoid multiple devices transmitting at the same time after \ac{DIFS}, each ready-to-transmit device determines a random backoff time. The device with the shortest backoff time transmits next and all other ready-to-transmit devices restart the media access procedure. In case two devices start sending next because they both randomly chose the shortest backoff time, the transmitted signal will interfere and the packets will not be answered with an \ac{ACK} frame.
In case of such a faulty transmission, the backoff time of the ready-to-transmit devices can increase exponentially afterwards.

To share the knowledge of a transmission time and the subsequently interframe space, a packet contains a \ac{NAV} that specifies the time the air transmission medium is used.

In various network architectures the "hidden station"-problem may occur. As you can see in \autoref{fig:hidden_station}, Station A is not able to sense a transmission of station B and vise versa. In case of simultaneous transmission of both stations, interference around the \ac{AP} may occur. 
\begin{figure}%
	\centering
	\includegraphics[width=0.75\textwidth]{figures/hidden_station.pdf}
	\caption{Hidden Station Problem}%
	\label{fig:hidden_station}%
\end{figure}
\subsection{BCC}
low-density parity check (LDPC)
\subsection{Guard Interval}
\textcite{pulimamidi_development_2007} erlären das Guard Interval als ein cyclic prefix OFDM Symbole vor Inter Symbol Interference und durch Inter Carrier Intereference. Inter Symbol Interference is caused by multipath delays , where the reflected delayed previous symbol can interfere with the current received symbol\cite{ravindranath_performance_2016}. Ebenso wird bei Inter Carrier Interference durch time-varying channel eine längere OFDM symbol duration erzeugt, dass genauso eine Interferenz with the following OFDM symbol entstehen kann \cite{van_duc_nguyen_intercarrier_2002}.

Über das Guard Interval führen \textcite{pulimamidi_development_2007} weiterhin folgendes auf. 
Da das Guard Interval die mögliche Interferenz auf das Folgesymbol verhindern soll, muss es mindestens so lang sein, sodass alle channel impulse responses mit dem entstehenden Delay im Guard Interval aufgefangen werden. 
\todo{longer GI WIfi 6 Outdoor Communication}
Das Guard Interval wird dann am Receiver wieder entfernt. Dadurch entsteht eine attentuation of bandwidth welche sich durch die folgende Formel beschreiben lässt: BERECHNET SICH ALS: NAHTLOSER ÜBERGANG \todo{Parameter einführen?}
\begin{equation}\label{eq:GI}
	GI\_Bandwidth\_Attentuation =
	\frac{
		\text{OFDM\_symbol\_duration} \times 100
	}{
		\text{OFDM\_symbol\_duration} + GI
	}
	,
\end{equation}
Seit IEEE 802.11n ist ein verkürztes \ac{GI} von  \SI{400}{\nano\second} nutzbar, welches gegenüber dem üblichen \ac{GI} von  \SI{800}{\nano\second} die  maximale Datenrate von \SI{270}{\mega\bit\per\second} auf \SI{300}{\mega\bit\per\second} steigert \cite{sauter_wireless_2022}. IEEE 802.11ax unterstützt \ac{GI}s von \SI{800}{\nano\second}, \SI{800}{\nano\second} and \SI{800}{\nano\second} um einen besseren Schutz gegen \todo{better source} multipath effects in der indoor und outdoor communication zu ermöglichen. 
\subsection{\ac{DCM}}
In order to introduce additional robostness \ac{DCM} can be applied to the physical layers of IEEE 802.11ax and IEEE 802.11bd according to \textcite{jacobs}. Die Autoren beschreiben \ac{DCM} als Möglichkeit Daten doppelt über zwei coherent carriers gesendet werden. Am Empfänger werden die Datenkopien mit dem log-likelihood ratio combiniert. Das erhöht die Empfangswahrscheinlichkeit der Daten auf Kosten der Datenrate. Die gleiche Anzahl von Daten benötigt nun doppelt so lange für die Übertragung. 

\todo{Frame stucture plotting maybe in tikz --> looks nicer}




\subsection{Extended Range}

\textcite{Deng} explains, that the HE ER SU \ac{PPDU} format is intendet to extend the range of a single station to access point transmission. Das wird nach den Autoren damit erreicht, dass die PPDU eine Wiederholung des HE-SIG-A Feldes beinhaltet.

\cite{Standard} spezifiziert, dass das HE ER SU PPDU format nur verwendet werden  darf, wenn 20 Mhz transmissions mit entweder 242 RU mit HE-MCS-0 - HE-MCS-2 oder 106 RU mit HE-MCS-0 auf einem spatial Stream verwendet werden.

Weiterhin wird nach \cite{Deng} über ein power-boosting der preamble, welches nach in \cite{standard} auf \SI{3}{\decibel} limitiert ist,  eine reliable transmission für weite Reichweiten gewährleistet. 



\subsection{\ac{MIMO}}
In order to furhter exploit the physical layer capabilities, the single transmitting and receiving antenna systems called Single-Input-Single-Output can be extended to \ac{MIMO} - systems.
 \textcite{sauter} describe the idea behind \ac{MIMO} as the usage of multiple transmit antennas and multiple receiving antenna. Dabei wird Spatial Multiplexing genutzt, sodass die gesendeten Signaler von jeder Antenne unterschiedlich an Objekten reflekiert werden und somit aus unterschiedlichen Richtung an den Receiver-Antennen empfangen werden können. 
 
Seit IEEE 802.11n sind bis zu vier MIMO-Streams möglich. Diese wurde bei IEEE 802.11ax nochmal auf bis zu acht MIMO-Streams erhöht. Da über jeden MIMO-Stream gleichzeitig Daten geschickt werden können, kann so die theoretische Datenrate in Abhängigkeit der nutzbaren Streams proportional steigen. Das ist nach \textcite{abbas} spatial multiplexing.

Jedoch sagen die Autoren zudem, dass MIMO dazu genutzt werden kann, um die Qualität des empfangenen Signals zu verstärken.  Das geschieht in Form von spatial diversity und \ac{STBC}.

\subsection{\ac{STBC}}
Dabei werden den Autoren nach redundant copies of data transmitted via different antenna to the receiver. At the receiver the received data copies are combined and a maximum likelihood detector is applied in order to retain a high quality signal\cite{Santumon}.

\textcite{Stamoulis} hat untersucht welchen Impact \ac{STBC} auf Wi-Fi hat. Dabei haben die Simulationen ergeben, dass STBC für IEEE 802.11a die Reichweite und die robustness erhöhen kann. Zusätzlich fanden die Autoren heraus, dass \ac{STBC} in nearly all cases bei gleicher Datenrate den SNR erhöht oder es sogar noch ermöglicht höhrer MCS werte zu nutzen und somit eine höhere Datenrate bei gleichem SNR erlaubt.  




\subsection{Bandwidth}
Um das hidden station problem zu umgehen kann eine Station nach \textcite{sauter_wireless_2022} 
Point coordinator 
ohne Wettbewerb mit optionaler Priorisierung

PIFS interval kürzer, 
beacon frame
CF Parameter set-element
\todo{nicht genauer eingehen, weil nicht relevant für die Arbeit? Darf ich das schreiben?}

CSMA /CA
Point Coordination Function

\textcite{sauter_wireless_2022}
DCF oberbegriff für CSMA /CA
 
 
Short Interframe Space SIFS ACK Frame 
 
Hidden Station Problem 
CTS and RTS
 
IEEE 802.11e DCF erweiterung für Video Streaming

CSMA CA Backoff zeit
Network allocation Vector NAV Zeitspanne Datensendungsdauer

MAC Header

Netzeintritt:
passives und Aktives Scanning
Service Set Identifier
Timing Synchronisationsfunktion TSF Timer-Wert

\textcite{sauter_wireless_2022}
every package management or usage data send ackknowledgement

Hidden Station Szenario
Reservieren
RTS CTS
meist nicht konfiguriert / ausgeschalten, bei großen Paketen sinnvoll



Authentifizierung
- Open System -Authentification
- Shared key Authentification
(nach neu nicht mehr verwendet


\input{80211ax_ac.tex}

\iffalse
\section{Modell für drahtlose Übertragungssysteme}

Abb 2.3.1  Modell einen Übertragungssystems

Beschränkungen und Regelungen Frequenzwahl, Sendeleistung

Analoger Kanal Störungen: thermisches Rauschen, Nebensprechen, Impulsstörungen
\fi

\section{Harvest and Loading Processes as a Use Cases for \ac{WIC}}
The Forage harvester has proven to be an essential agricultural machine for harvest-
ing and loading forage. \textcite{seifert_feldhacksler_1962} define a forage harvester
as an agricultural loading machine for nearly all types of animal feed. By mounting different cutting and loading devices, a forage harvester can load the following animal feed, according to the authors: Hey, Straw, Corn, Grass and Clover.

\begin{figure}%
	\centering
	\includegraphics[width=0.6\textwidth]{figures/claas_harvest_side.png}
	\caption{\ac{FH} and \ac{TM} while }%
	\label{fig:normal}%
\end{figure}

In the harvesting and loading process, a \ac{TM} typically drives alongside or behind the \ac{FH} so that the \ac{FH} can load the harvested goods onto the trailer of the \ac{TM} using the spout. Drivers operate both machines and try to keep the speed and distance so that the spout only throws the harvested goods into the trailer of the TM. An image of a harvesting and loading process for corn can be seen in \autoref{fig:normal}.

Taking a corn harvest scenario as an example, key figures can be looked up in \cite{faustzahlen2018}, a standard reference book in agricultural literature. This book contains key figures of agricultural processes, which 80 experts have compiled. The key figures, which are shown in \autoref{tab:DataSilageHarvest}, are dependent on the \ac{PPD} and show the large amount of forage harvested by  a  \ac{FH} every hour.
\begin{table}
	\centering
	\begin{tabular}{>{\raggedright}p{5.5cm}p{1.6cm}p{1.6cm}p{1.6cm}}
		\toprule
		Kennzahlen & \ac{PPD} \SI{20}{\tonne\per\hectare} & \ac{PPD} \SI{30}{\tonne\per\hectare} & \ac{PPD} \SI{50}{\tonne\per\hectare}\\
		\midrule
		Required \ac{TM}s & \num{5}&
		\num{7} & \num{10} \\
		Harvesting performance volume [\si{\cubic\metre\per\hour}] &
		\num{285.7}-\num{333.3}
		& \num{428.6}-\num{500.0} &
		\num{595.7}-\num{695.0}\\
		Harvesting performance \ac{TM} loads [\si{\per\hour}] &
		\num{5.7} - \num{6.7}
		& \num{8.6} - \num{10.0} &
		\num{11.9} - \num{13.9}\\
		Harvesting performance mass [\si{\tonne\per\hour}] & \num{100}
		 & \num{150} &
		\num{208.5} \\
		\bottomrule
	\end{tabular}
	\caption{Key figures from \cite{faustzahlen2018} of corn harvest of a \ac{FH} with a working width of \SI{6.2}{\metre} in a \SI{80}{\hectare}-field in regard to \ac{PPD}}
	\label{tab:DataSilageHarvest}
\end{table}

The harvesting and loading processes are examples of the use of an agricultural Platooning Services as described by 
\textcite{zhang_method_2009}.
This Platooning Service creates a leader and follower system where an uncrewed agricultural machine follows a leading operated agricultural machine.
For the harvesting and loading process, a Platooning service could be used as follows.
The operated \ac{FH}, as a leader, sets the path and speed and transmits the data via \ac{WIC} to the \ac{TM}. Based on the path and speed data of the \ac{FH}, \ac{TM} follows unmanned with a longitudinal and lateral offset, as \autoref{fig:offset} displays.
\begin{figure}%
	\centering
	\includegraphics[width=0.65\textwidth]{figures/offset_platoon.pdf}
	\caption{Lateral and longitudinal Offset between the two agricultural machines \ac{FH} and \ac{TM} in a corn harvest scenario}%
	\label{fig:offset}%
\end{figure}

This Platooning Service positions the \ac{TM} optimally to the \ac{FH} so that the forage can be loaded ideally from the \ac{FH} onto the \ac{TM}.


\autoref{fig:workforce_agri} shows that the number of workers in the agriculture domain is declining.  
Because fewer and fewer workers are working in agriculture, the use of platooning services for harvest and loading processes can save and free up labour for other activities.

As stated in \autoref{tab:DataSilageHarvest}, already ten drivers for the \ac{TM}s are needed in the corn harvest process with a high \ac{PPD}. 

Using an agricultural Platooning Service, each \ac{TM} can drive unmanned in the field leading to a smaller number of workers needed in the corn harvest process.

\begin{figure}%
	\centering
	\includegraphics[width=0.75\textwidth]{figures/WorkForceAgriculture.pdf}
	\caption{Decrease in the agricultural labor force in Germany based on the data from \cite{bmel2020}}%
	\label{fig:workforce_agri}%
\end{figure}


At the same time, the harvest and loading processes are examples of the video streaming \ac{WIC} use case. During these harvest and loading processes the spout of the \ac{FH} must be controlled to set the loading position of the forage into the trailer of the \ac{TM}.

According to \textcite{murcia_quadrotor_2014}, different spout guidance and control systems have been developed to automate the filling of the trailer. Spout guidance and control systems use a camera attached to the spout to determine the fill volume at each point of the trailer via machine vision and set the spout to fill the empty parts of the trailer accordingly. The author describes Autofill - systems from Claas and Intellifill - systems from CNH Industrial as examples of spout guidance systems. 

Streaming the video of a camera at the spout from the \ac{FH} to the \ac{TM} would be a practical application of the video streaming use case in the harvesting process. If the \ac{TM} driver can watch a live stream of the trailer's fill level, he will always be
informed and knows when the trailer is full and can drive the forage back to the
farm.

\chapter{Analyzing Corn Harvest Process Data}

To gain a better insight into requirements of the \ac{WIC} use cases Platooning and Streaming Services, I analysed process data of a corn harvest scenario as the example for I collected GPS tracks of  a  \ac{FH} and two to three \ac{TM}s harvesting corn on a field in Germany on two days in September. For this, I placed tablets in the driver's cabs of  a  \ac{FH} and three \ac{TM}s, which recorded the position and speed in an NMEA data stream of the tablet's GPS every second. 

% wahrscheinlich raus
The workflow for collecting the corn harvest process data was as follows. 
I handed out the tablets to the drivers, which left the farm with the tablets in the driver's cabs to drive to the field in the morning. The tablets recorded the position and speed of the \ac{FH} and the \ac{TM}s all day. During breaks, the tablets continued to capture the NMEA data stream of their GPS even if the positions and speed did not change.

After recording the process data, I anonymized it. 
First, I deleted data points of the log files until the recorded accuracy of the following data points was less than \SI{2}{\metre}. Then, I replaced the timestamp and the date for all data points with a continuous index.

After that, I anonymized the location data by adding a random offset to the GPS coordinates. As a result, this procedure moved the areas to a random location in the world.

The goal of analysing the corn harvest data was to investigate the machines moving in the working scenarios relative to each other. The speed and distance of the machines in tracked data of harvest platoons may result in new use case requirements, e.g. latency or communication range of Platooning and Streaming Services. The machinery movement profile can be used to identify when shadowing effects may occur in the work scenario or when machines meet in the field.

I had to develop an intelligent algorithm to detect harvest platoons in the Harvest Process data. It can detect them in the recorded process data.

For this purpose, I built a dashboard with the Python framework \textit{Dash}\footnote{https://dash.plotly.com/introduction Accessed: 5.12.2022}. In the dashboard, I initially plotted all the positions in a polyline for each machine
on a map. A slider allows one to set a time interval that narrows down the data
points for display in the dashboard. In addition, one could select which \ac{TM}s are displayed next to the \ac{FH}. For the chosen time interval, the distance and velocity difference between the selected \ac{TM}s and the \ac{FH} were plotted in graphs as time histories. 

In the dashboard, I could get an overview of the machine's behaviour 
before, during, and after the overloading scenario.
In the overview, it can be seen that a \ac{FH} is nearly always in the overloading process with a \ac{TM}. In doing so, the \ac{FH} may occasionally stay in the same place if the cutter is clogged or there is a transition of \ac{TM}s where a full \ac{TM} moves away from the \ac{FH} and  a  empty \ac{TM} catches up to the \ac{FH} to take over the forage.

A \ac{TM} is in a platoon with a  \ac{FH} if it is close to the \ac{FH} and they are moving at nearly the same speed. During a turning manoeuvre on the field, the distance between \ac{TM} and \ac{FH} increases. Since both machines have different curve radii in a turning manoeuvre, a different speed can be observed on both machines to finish turning simultaneously.
A \ac{TM} is in a platoon with a  \ac{FH} if it is close to the \ac{FH} and they are moving at nearly the same speed. During a turning manoeuvre on the field, the distance between \ac{TM} and \ac{FH} increases. Since both machines have different curve radii in a turning manoeuvre, a different speed of the machines can be observed to finish turning simultaneously.

A new harvesting process begins as soon as the machines finish turning and are at the beginning of a new lane.
The machines again drive closely and nearly at the same speed to harvest and overload forage.

Furthermore, sometimes another \ac{TM} can be close to the \ac{FH}. This \ac{TM} is empty and waits to work with the \ac{FH} in the next platoon. For that purpose, the empty \ac{TM} drives close behind the current platoon at the same speed so as not to catch up even closer to the platoon and be ready in the close vicinity.

Based on these observations above, I developed an intelligent algorithm for detecting platooning scenarios. It uses a weighted sum of distance and speed difference between \ac{FH} and \ac{TM} to detect the platooning scenarios.

For verification purposes, I displayed the found platoons scenarios on the map and confirmed the algorithm's functioning. 

Additionally, I implemented the following further verification method. 
I observed that a fully loaded \ac{TM} leaves the field via one of the field exits to bring the crop to a farm building. Via a
check if a \ac{TM} has left the field and thereby passed the exit after leaving a platoon,
wrongly recognized platoons can be discarded.

\begin{figure}%
	\centering
	\includegraphics[width=0.85\textwidth]{figures/distanceHarvestSzenario.pdf}
	\caption{Distribution of time proportions where a given distance was between \ac{FH} and \ac{TM} in a harvest platoon scenario.}%
	\label{fig:distance}%
\end{figure}
\begin{figure}%
	\centering
	\includegraphics[width=0.85\textwidth]{figures/speedHarvestSzenario.pdf}
	\caption{Distribution of time proportions where \ac{FH} and \ac{TM} drove with a certain speed in a harvest platoon scenario}%
	\label{fig:speed}%
\end{figure}

After the platoons scenarios were correctly detected, I included the data points before each platoons scenario till a maximum distance of \SI{50}{\metre} between \ac{FH} and \ac{TM} was exceeded. These data points are also relevant to the requirements because at the beginning of an agricultural platooning service, the \ac{FH}, as the leader of the system, must be able to guide an empty \ac{TM} to the appropriate position for overloading.

For the detected data points of the platooning services from recorded data of the corn harvest, the proportion where the \ac{FH} and \ac{TM} move in a specific distance is shown in \autoref{fig:distance}. For the same data points, the proportion in which \ac{FH} and \ac{TM} move at a given speed is available in \autoref{fig:speed}.

These analysing results show that the \ac{TM} and the \ac{FH} usually move with a distance of less than \SI{10}{\metre}. In addition, the distance can also be higher, e.g. in turning manoeuvres or before the overloading process.

One notable observation in \autoref{fig:speed} is that the \ac{FH} and \ac{TM}s in the corn harvesting platooning scenario often travel at a speed of approximately \SI{10}{\kilo\metre\per\hour}. This speed is significantly higher than the average speed of \SI{5.6}{\kilo\metre\per\hour} of a \ac{FH} in an entire corn harvesting process from \cite{faustzahlen2018}. It is necessary to classify that in the year of the recorded data was little precipitation, so the corn was not dense and high, and the last speed value is an average value of the entire corn harvest process, which can be calculated from the data in \cite{faustzahlen2018}.
Nevertheless, the recorded data shows that a platooning service in agriculture must also be designed for higher speeds. 

\textcite{klingler_agriculture_2018} investigated the suitability of IEEE 802.11p for \ac{WIC}. The authors detected that shadowing effects occur in the harvest scenario. The authors explain the effect because another tractor or the spout of the \ac{FH} was in \ac{LOS}.
\begin{figure}%
	\centering
	\begin{tikzpicture}
		\node[label=below right:FH](a) at (0,0) {\textbullet};
		\node[label=above:North](d) at (0,1) {\textbullet};
		\node[label=above:Heading](c) at (1,1.5) {\textbullet};
		\node[label=below:TM](b) at (2,0) {\textbullet};
		\node[label=below:FHprev](e) at (-1,-1.5) {\textbullet};
		\node[label=above:North](f) at (-1,-0.5) {\textbullet};
		\draw [thick] (a) -- (b);
		\draw [thick] (a) -- (c);
		\draw [thick] (a) -- (d);
		\draw [thick] (a) -- (e);
		\draw [thick] (e) -- (f);
		\draw 
		pic["$\beta$", draw, <-,angle eccentricity=0.8, angle radius=1.0cm]
		{angle=b--a--d}
		pic["$\alpha$", draw, <-,angle eccentricity=1.2, angle radius=1.0cm]
		{angle=a--e--f}
		pic["$Relative Bearing$", draw, <-, angle eccentricity=1.7, angle radius=1.5cm]
		{angle=b--a--c};
	\end{tikzpicture}
	\caption{Relative bearing between \ac{FH} and \ac{TM} which is calculated using the previous location of \ac{FH} by the difference of $\beta$ minus $\alpha$}%
	\label{fig:bearing_fh_tm}%
\end{figure}
I reviewed the recorded position data to get an overview of where a \ac{TM} is in the overloading process relative to the \ac{FH}. The relative bearing is the angle between B and the heading of point A. Using the previous position of the \ac{FH}, the relative bearing between \ac{FH} and \ac{TM} can be calculated with the angles $\alpha$ and $\beta$ in \autoref{fig:bearing_fh_tm} as:
\begin{equation}\label{eq:RelativeBearing}
	Relative\_Bearing = \beta - \alpha	,
\end{equation}
Assuming that the \ac{FH} does not move backwards, we can see from the relative bearing in which angle from the \ac{FH} the \ac{TM} is located. The result is displayed in \autoref{fig:bearing}. It can be observed that the \ac{TM} is mainly close to the \ac{FH} at an angle of \SIrange{30}{150}{\degree} at a distance between \SIrange{0}{10}{\metre}. 

In addition, it is noticeable that the machine can also be directly behind the \ac{FH}. This driving behind each other is common when a new part of the field is being cut in harvesting, as can be seen in \autoref{fig:startpart}. When there is a greater distance between \ac{TM} and \ac{FH}, the \ac{TM} is usually behind the FH at a angle of \SIrange{157.5}{187.5}{\degree}. At these moments, the \ac{TM} is empty and closes up to the \ac{FH} to operate in a new platooning Service together. 

\begin{figure}%
	\centering
	\includegraphics[width=0.99\textwidth]{figures/bearingHarvestScenario50.pdf}
	\caption{Distribution of time proportion at specific distances and relative bearings between \ac{FH} and \ac{TM}}%
	\label{fig:bearing}%
\end{figure}

\begin{figure}%
	\centering
	\includegraphics[width=0.8\textwidth]{figures/claas_harvest_behind.png}
	\caption{Distribution of time proportion at specific distances and relative bearings between \ac{FH} and \ac{TM}}%
	\label{fig:startpart}%
\end{figure}

Another notable fact is that the \ac{TM} hardly ever stayed to the left of the \ac{FH}. Since the \ac{FH} often made left turns, the crop was usually already harvested to the right of the \ac{FH} so that the \ac{TM} could drive there without running over the crop. On rare occasions, the \ac{TM} was also to the left of the \ac{FH}. Such a platooning scenario can be an exception or a driving manoeuvrer to start cutting a new part of the field.   

The results reveal a first impression of the requirements of a harvest and loading process. Um eine generelle Aussage treffen zu können, müssen noch mehr Daten von der ganzen Welt analysiert werden. Die niedrige Niederschlagsmenge dieses Jahr hat bereits eine niedrigen Pflanzenbestand einstellt. Dadurch war eine höhere Prozessgeschwindigkeit möglich. Um eine generelle Aussage zu treffen sollten deswegen auch Daten aus verschiedenen Jahren genutzt werden, da diese verschiedene Ausgangsbedingungen für die Felder zeigen können. 



\TODO{
Heading Annahme Vorwärts Fahrt. Ansonsten Überprüfen und nochmal Einzelfahrt plotten und anschauen. 
Wie oft dreht sich das Heading ?
Möglicherweise Rückwärtsfahrt erkennen? Oder WIC Requirements erwähnen? }


\chapter{Field Measurements}


\chapter{Developed architecture / System design / Implementation / ...}


\begin{itemize}
\item describe everything you yourself did (as opposed to the fundamentals chapter, which explains what you built on)
\item start with a theoretical approach
\item describe the developed system/algorithm/method from a high-level point of view
\item go ahead in presenting your developments in more detail
\item recommended length: approximately one third of the thesis.
\end{itemize}

\chapter{Simulation}
Seite 77 von 93 02 simulation.pdf
Propagation Model:
 Two Ray Ground only mathematics Rappaport
 Jakes Model
 Three Log Distance
 
 
 Data Simulation
 
 
 
\todo{QUESTIONS open 7 Möglichkeiten outdoor wifi
was für Effecte}

\todo{
Robustheit: Matlab? 
Goodput: ns3
Range: Matlab? Somehow? overview
other papers? 
Enough?
}
 
 
\section{ns-3 Network Simulator}

Bei der Wahl der Network Simulator Wifi 6 Implementierungen 


\todo{Warum nicht was anderes GNS3, MININET, ... ?}

According to \cite{ns3manual} ns-3 is a discrete-event network simulator project, which was founded in 2006. The ns-3 project is open source with a licence based on n GNU GPLv2 compatibility. It aims to procide an open, extensible network simulator for research and educational use. Ns-3 scripts can be written in C++ or Python.
ns-API Python uses models in C++
build system Cmake

ATM no pre-built libraries and packages for operating systems
 
The concept of ns3 is based on the abstraction of simulated systems. For this purpose, the term node was introduced for basic computing devices. The Node class offers the possibility to install protocol stacks and applications or to add peripheral cards and mobility models to the node.
Applications are the abstraction of the user-level applications, which represent an activity to be simulated. For this purpose, the applications use resources and functionalities provided by the system software of a node. An example for the 



\section{Data Rate}


\ac{GI} and \ac{CR}
\begin{figure}%
	\centering
	\includegraphics[width=0.95\textwidth]{figures/gi_dataRate_simulation.pdf}
	\caption{Achieved Goodput and theoretical Datarate of two WiFi 6 stations in Ad-Hoc Mode with \num{2} \ac{MIMO} streams and a bandwidth of \SI{80}{\mega\hertz} in regards to the number of \ac{MIMO} streams and the chosen \ac{MCS} and \ac{CR}}%
	\label{fig:Data_rate_GI}%
\end{figure}

atteninuation of bandwidth : 800ns : \SI{94}{\percent} \SI{89}{\percent} \SI{80}{\percent}

Factors apply for MCS0 but may also apply later

\begin{figure}%
	\centering
	\includegraphics[width=0.95\textwidth]{figures/mimo_dataRate_simulation.pdf}
	\caption{Achieved Goodput and theoretical Datarate of two WiFi 6 stations in Ad-Hoc Mode with a \ac{GI} of \SI{3200}{\nano\second} and a bandwidth of \SI{80}{\mega\hertz} in regards to the number of \ac{MIMO} streams and the chosen \ac{MCS} and \ac{CR}}%
	\label{fig:Data_rate_Mimo}%
\end{figure}


\begin{figure}%
	\centering
	\includegraphics[width=0.95\textwidth]{figures/ER_dataRate_simulation.pdf}
	\caption{Achieved Goodput and theoretical Datarate of two WiFi 6 stations in Ad-Hoc Mode with a \ac{GI} of \SI{3200}{\nano\second} and a bandwidth of \SI{80}{\mega\hertz} in regards to the number of \ac{MIMO} streams and the chosen \ac{MCS} and \ac{CR}}%
	\label{fig:Data_rate_ER}%
\end{figure}

\todo{DataRate for DCM or STBC}
STBC and DCM * 2 payload / half data rate

But Latency? 
Robustness?

Fixed Wifi 6 devices: 4 Streams, 2.4, 5.0 Ghz
Fixed Wifi bd devices: 1 Stream, 5.9 Ghz, 

Leave it open for future work?
look for different chips?

Auf different paper stützen? 


\chapter{Evaluation}


\begin{itemize}
\item measurement setup / results / evaluation / discussion
\item whatever you have done, you must comment it, compare it to other systems, evaluate it
\item usually, adequate graphs help to show the benefits of your approach
\item each result/graph must not only be described, but also discussed (What's the reason for this peak? Why have you observed this effect? What does this tell about your architecture/system/implementation?)
\item recommended length: approximately one third of the thesis.
\end{itemize}



\chapter{Conclusion}


\begin{itemize}
\item summarize again what your paper did, but now emphasize more the results, and comparisons
\item write conclusions that can be drawn from the results found and the discussion presented in the paper
\item future work (be very brief, explain what, but not much how, do not speculate about results or impact)
\item recommended length: one page.
\end{itemize}



\cleardoublepage

\listofabbreviations
\clearpage

\listoffigures
\clearpage

\listoftables
\clearpage

\printbibliography

\end{document}
